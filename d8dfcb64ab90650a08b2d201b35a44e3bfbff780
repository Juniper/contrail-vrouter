{
  "comments": [
    {
      "key": {
        "uuid": "9a03fa91_1d2cf28a",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 1,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "Add copyright info",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c8eebd0_637f156f",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "Can you rename this to GET_LOG_BUF_IDX().",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "775031a4_77c1f67d",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "Can you rename this to GET_LOG_BUF()",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b41b7072_3e462069",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 49,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "Fix the alignment",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa6bbbc9_12f724e9",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "Please fix the alignment in this function.",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01e4347c_64d01511",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "Please remove this printf",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3c5d815_e09444f8",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 206,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "set router-\u003evr_logger to NULL",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8372a122_d5b7b0cb",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 213,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-27T06:05:16Z",
      "side": 1,
      "message": "How is vrouter_set_log handled?",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0050179f_cb6ef416",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 223,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "This might cause a problem when lets say 1 thread is writing to the buf and at the same time another thread tries to clear the buf due to user command. At that time, the 1st thread would end up writing onto freed buffer and crash. We need to synchronize between writing and clearing of the buffer. One option is to set an atomic flag in the buf struct when clear command is issued and then realloc the buf when next write is done. Reads should check the clear flag and return if it is set.",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db78c9cb_5dd307b6",
        "filename": "dp-core/vr_logger.c",
        "patchSetId": 4
      },
      "lineNbr": 226,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "If h_op !\u003d SANDESH_OP_GET you are sending the response, but shouldn\u0027t we return after that? Is it expected to execute the next stmts as well?",
      "range": {
        "startLine": 226,
        "startChar": 4,
        "endLine": 226,
        "endChar": 58
      },
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7cbc272_4010cdf4",
        "filename": "dp-core/vr_route.c",
        "patchSetId": 4
      },
      "lineNbr": 4,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-10-07T02:51:51Z",
      "side": 1,
      "message": "Can you add traces for few other key control plane modules as well as part of this?\nEg: vif, nh, vxlan, mirror,",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74ded50d_6c74e6ce",
        "filename": "dp-core/vr_route.c",
        "patchSetId": 4
      },
      "lineNbr": 14,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-26T05:57:19Z",
      "side": 1,
      "message": "Module IDs should be in one place in a separate .h file, maybe vr_logger.h",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0aaaf085_f7a884ac",
        "filename": "dp-core/vr_route.c",
        "patchSetId": 4
      },
      "lineNbr": 24,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-26T05:57:19Z",
      "side": 1,
      "message": "1) Need to handle mac address case.\n2) Since we program only a single prefix/mac at a time, this loop is not required.\n   Also use snprintf with max buffer size given by infra and print the IP/mac in dotted\n   notation.",
      "range": {
        "startLine": 20,
        "startChar": 9,
        "endLine": 24,
        "endChar": 11
      },
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ab13405_ad77263b",
        "filename": "dp-core/vr_route.c",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-26T05:57:19Z",
      "side": 1,
      "message": "Lets avoid using dynamic memory allocation for every log.\nInstead, you can allocate a local buffer on the stack and use snprintf to copy all the contents.\nIf the user log msg is \u003e than buffer size, it will get truncated by snprintf.\nLets make sure we allocate sufficient buffer size in infra.",
      "range": {
        "startLine": 26,
        "startChar": 9,
        "endLine": 29,
        "endChar": 34
      },
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0951fa99_24f65cb1",
        "filename": "dp-core/vr_route.c",
        "patchSetId": 4
      },
      "lineNbr": 143,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-26T05:57:19Z",
      "side": 1,
      "message": "You can just do \"if (ret \u003d\u003d 0)\" and reduce one condition check",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80c63f44_320e5397",
        "filename": "dp-core/vr_route.c",
        "patchSetId": 4
      },
      "lineNbr": 144,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-26T05:57:19Z",
      "side": 1,
      "message": "Good to add rt_replace_plen also",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33557ace_02052505",
        "filename": "dp-core/vr_route.c",
        "patchSetId": 4
      },
      "lineNbr": 190,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-26T05:57:19Z",
      "side": 1,
      "message": "Good to add rt_replace_plen as well",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1bcc7a2_1cab4327",
        "filename": "dp-core/vr_stats.c",
        "patchSetId": 4
      },
      "lineNbr": 591,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-27T06:05:16Z",
      "side": 1,
      "message": "Instead of initing logger as part of stats init, lets add a new module definition under\nstatic struct vr_module modules[] \u003d { } in vrouter.c and register callback there.",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b27b04d_0e5cde0c",
        "filename": "dpdk/dpdk_vrouter.c",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-27T06:05:16Z",
      "side": 1,
      "message": "I think this is not required.\nLog enabling/disabling can be implicit and controlled via log level.\nIf log level \u003d none , logging is disabled for that module\nelse, logging is enabled for that module at the configured log level.\nWe can pick the default log level. Say, Error.",
      "range": {
        "startLine": 104,
        "startChar": 0,
        "endLine": 105,
        "endChar": 28
      },
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bcb270ec_ba661f3a",
        "filename": "dpdk/dpdk_vrouter.c",
        "patchSetId": 4
      },
      "lineNbr": 106,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-27T06:05:16Z",
      "side": 1,
      "message": "\"log-entries\" to be specific",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "efb6131c_6a095382",
        "filename": "dpdk/dpdk_vrouter.c",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-27T06:05:16Z",
      "side": 1,
      "message": "Rename to log_entries",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a79e032_32af3058",
        "filename": "include/vr_logger.h",
        "patchSetId": 4
      },
      "lineNbr": 48,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "Instead of API, can you call it as Macro. Since these are macros. Same in other places.",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ab67d1ae_67d0488b",
        "filename": "include/vr_logger.h",
        "patchSetId": 4
      },
      "lineNbr": 50,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "To be consistent, please rename this Macro to IS_LOG_TO_CON.",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a38f41a6_aea9f361",
        "filename": "include/vr_logger.h",
        "patchSetId": 4
      },
      "lineNbr": 64,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-27T06:05:16Z",
      "side": 1,
      "message": "Can you rename this to SET_MOD_LOG_LEVEL()",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1226268d_46438260",
        "filename": "include/vr_logger.h",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "Why are we doing this?",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a05f092_a340373f",
        "filename": "include/vr_logger.h",
        "patchSetId": 4
      },
      "lineNbr": 84,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "What will happen if vr_log-\u003evr_log_buf[mod].buf_idx reaches 0xFFFFFFFF ? Will it work correctly in rollover case?",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e26f7265_ac5d99d9",
        "filename": "include/vr_logger.h",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "We can optimize this moving it as the first check. No need of incrementing log buffer index in this case. We can increment the log buffer index only if we are logging to buffer.",
      "range": {
        "startLine": 86,
        "startChar": 9,
        "endLine": 87,
        "endChar": 44
      },
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed9106f5_bc9e8663",
        "filename": "include/vr_logger.h",
        "patchSetId": 4
      },
      "lineNbr": 103,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-19T14:14:17Z",
      "side": 1,
      "message": "Can you list the elements vertically instead of horizontally? Same in other place.\nAlso name the elements as MODULE_FLOW , etc..",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f5fc3653_dce30577",
        "filename": "linux/vrouter_mod.c",
        "patchSetId": 4
      },
      "lineNbr": 50,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-27T06:05:16Z",
      "side": 1,
      "message": "Same comment as DPDK file.",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7eb9180_b8f4255c",
        "filename": "utils/vrouter.c",
        "patchSetId": 4
      },
      "lineNbr": 478,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-27T06:05:16Z",
      "side": 1,
      "message": "We don\u0027t need \"\\n\" here?",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5436ccb1_299b3a06",
        "filename": "utils/vrouter.c",
        "patchSetId": 4
      },
      "lineNbr": 780,
      "author": {
        "id": 631
      },
      "writtenOn": "2019-09-27T06:05:16Z",
      "side": 1,
      "message": "Please add a comment on the string format you are parsing",
      "revId": "d8dfcb64ab90650a08b2d201b35a44e3bfbff780",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    }
  ]
}